<odoo>
    <record id="sequence_app_order" model="ir.sequence">
        <field name="name">APP Order</field>
        <field name="code">app.order</field>
        <field name="prefix"></field>
        <field name="padding">5</field>
        <field name="number_increment">1</field>
        <field name="company_id" eval="False"/>
    </record>
    <!-- Inherit Form View to Modify it -->
    <record id="app_order_view_form" model="ir.ui.view">
        <field name="name">app_order_view_form</field>
        <field name="model">app.order</field>
        <field name="arch" type="xml">
            <form string="app_order_form" create="1" edit="1">
                <header>
                    <button name="action_received" string="Received" states="draft" type="object" class="oe_highlight"/>
<!--                    <button name="send_sms_message" string="Send Message" type="object" class="oe_highlight"/>-->
                    <button name="action_cancelled" string="Cancel" groups="healthy_app_orders.group_store_manager,healthy_app_orders.app_order_manager" states="draft,received" type="object" class="oe_highlight"/>
                    <field name="state" widget="statusbar" statusbar_visible="draft,received,delivery,payment"/>
                </header>
                <sheet>
                    <group>
                        <group>
                            <field name="name"/>
                            <field name="partner_id" readonly="0"/>
                            <field name="schedule_time"  readonly="0"/>
                            <field name="due_date" readonly="0"/>
                            <field name="branch_id" readonly="0"/>
                            <field name="order_date" required="1" readonly="0"/>
                            <field name="order_source_id" readonly="0"/>
                            <field name="customer_suggestion" readonly="0"/>
                            <field name="customer_notes" readonly="0"/>
<!--                            <field name="order_source"/>-->
                            <field name="delivery_cost" readonly="0"/>
                            <field name="call_center_agent_name" readonly="0"/>
                            <field name="synced" invisible="0"/>
                            <field name="deleted" invisible="0"/>
                            <field name="deleted_synced" invisible="0"/>
                            <field name="created_from_schedule" invisible="0"/>
                        </group>
                        <group>
                            <field name="company_id" readonly="0"/>
                            <field name="sales_person" readonly="0"/>
                            <field name="create_date" readonly="0"/>
                            <field name="origin" readonly="0"/>
                            <field name="pos_created_time" readonly="0"/>
                            <field name="pos_delivered_time" readonly="0"/>
                            <field name="cancel_reason" attrs="{'readonly': [('state', 'not in', ('draft','received'))]}"/>
                            <field name="return_reason" readonly="0"/>
                            <field name="order_address" readonly="0"/>
                        </group>
                        <group>
                            <field name="is_schedule" readonly="0"/>
                            <field name="free_delivery" readonly="0"/>
                            <field name="is_paid"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Order Products">
                            <field name="app_lines" readonly="0">
                                <tree editable="bottom">
                                    <field name="product_id"/>
                                    <field name="qty"/>
                                    <field name="price"/>
                                    <field name="discount"/>
                                    <field name="subtotal"/>
                                </tree>
                            </field>
                            <group class="oe_subtotal_footer oe_right" colspan="2" name="amount_total">
                                <div class="oe_subtotal_footer_separator oe_inline">
                                    <label for="amount_total" />
                                </div>
                                <field name="amount_total" nolabel="1" class="oe_subtotal_footer_separator"/>
                                 <div class="oe_subtotal_footer_separator oe_inline">
                                    <label for="discount_amount" />
                                </div>
                                <field name="discount_amount" nolabel="1" class="oe_subtotal_footer_separator"/>
                                 <div class="oe_subtotal_footer_separator oe_inline">
                                    <label for="final_total" />
                                </div>
                                <field name="final_total" nolabel="1" class="oe_subtotal_footer_separator"/>
                            </group>
                            <div class="oe_clear"/>
                              <group>
                                <field name="discount_type"/>
                                <field name="discount"  />
                            </group>
                        </page>
                        <page string="Schedule Part" attrs="{'invisible': [('is_schedule', '=', False)]}">
                            <group>
                                <group>
                                    <field name="schedule_start_date" attrs="{'invisible': [('is_schedule', '=', False)],'required': [('is_schedule', '=', True)]}" readonly="0"/>
                                    <field name="saturday" attrs="{'invisible': [('is_schedule', '=', False)]}" readonly="0"/>
                                    <field name="sunday" attrs="{'invisible': [('is_schedule', '=', False)]}" readonly="0"/>
                                    <field name="monday" attrs="{'invisible': [('is_schedule', '=', False)]}" readonly="0"/>
                                    <field name="tuesday" attrs="{'invisible': [('is_schedule', '=', False)]}" readonly="0"/>
                                </group>
                                <group>
                                    <field name="schedule_end_date" attrs="{'invisible': [('is_schedule', '=', False)],'required': [('is_schedule', '=', True)]}" readonly="0"/>
                                    <field name="wednesday" attrs="{'invisible': [('is_schedule', '=', False)]}" readonly="0"/>
                                    <field name="thursday" attrs="{'invisible': [('is_schedule', '=', False)]}" readonly="0"/>
                                    <field name="friday" attrs="{'invisible': [('is_schedule', '=', False)]}" readonly="0"/>
                                </group>
                            </group>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
            </form>
        </field>
    </record>
    <record id="app_order_view_tree" model="ir.ui.view">
        <field name="name">app_order_view_tree</field>
        <field name="model">app.order</field>
        <field name="arch" type="xml">
            <tree string="app_order_tree" create="0">
                <field name="name"/>
                <field name="partner_id"/>
                <field name="branch_id"/>
                <field name="sales_person"/>
                <field name="order_date"/>
<!--                <field name="create_date"/>-->
                <field name="state"/>
                <field name="amount_total"/>
                <field name="discount_amount"/>
                <field name="final_total"/>
            </tree>
        </field>
    </record>
  <record id="app_order_lines_view_tree" model="ir.ui.view">
        <field name="name">app_order_lines_view_tree</field>
        <field name="model">app.order.lines</field>
        <field name="arch" type="xml">
            <tree string="app_order_lines_tree" create="false">
                <field name="product_id"/>
                <field name="qty"/>
                <field name="discount"/>
                <field name="price"/>
                <field name="subtotal"/>
            </tree>
        </field>
    </record>

    <record id="app_order_action_normal" model="ir.actions.act_window">
        <field name="name">App Order</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">app.order</field>
        <field name="view_mode">tree,form,pivot</field>
        <field name="domain">[('created_from_schedule', '=', False),('deleted', '=', False),]</field>
    </record>
    <!-- This Menu Item must have a parent and an action -->
    <menuitem id="app_order_menu_id" groups="app_order_user,app_order_manager" name="App Orders" action="app_order_action_normal" sequence="5"/>

    <record id="schedule_app_orders_action" model="ir.actions.act_window">
        <field name="name">Schedule App Order</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">app.order</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('is_schedule', '=', True)]</field>
    </record>
    <!-- This Menu Item must have a parent and an action -->
    <menuitem id="schedule_app_order_menu_id" name="Schedule App Orders" action="schedule_app_orders_action" parent="app_order_menu_id" sequence="5"/>
</odoo>
