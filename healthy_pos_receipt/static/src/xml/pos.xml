<?xml version="1.0" encoding="UTF-8"?>
<templates id="point_of_sale.template" xml:space="preserve">
	<t t-name="OrderReceipt" t-inherit="point_of_sale.OrderReceipt" t-inherit-mode="extension" owl="1">
		<xpath expr="//div[hasclass('pos-receipt')]" position="replace">
			<div class="pos-receipt">
				<t t-if="receipt.company.logo">
					<img class="pos-receipt-logo" t-att-src="receipt.company.logo" alt="Logo"/>
					<br/>
				</t>
				<t t-if="!receipt.company.logo">
					<h2 class="pos-receipt-center-align">
						<t t-esc="receipt.company.name"/>
					</h2>
					<br/>
				</t>
				<div class="pos-receipt-contact">
					<span t-esc="receipt.branch_id"/>
					<t t-if="receipt.branch_name">
						<div style="direction: rtl;">اسم الفرع:
							<t t-esc="receipt.branch_name"/>
						</div>
					</t>
					<t t-if="receipt.pos_branch">
						<div style="direction: rtl;">رقم الفرع:
							<t t-esc="receipt.pos_branch"/>
						</div>
					</t>
					<t t-if="receipt.cashier">
						<div style="direction: rtl;">الكاشير:
							<t t-esc="receipt.cashier"/>
						</div>
					</t>
					<t t-if="receipt.name">
						<div style="direction: rtl;">رقم الطلب:
							<t t-esc="receipt.name"/>
						</div>
					</t>
					<t t-if="receipt.date.localestring">
						<div style="direction: rtl;">تاريخ الطلب:
							<t t-esc="receipt.date.localestring"/>
						</div>
					</t>
					<t t-if="receipt.company.contact_address">
						<div style="direction: rtl;">الموقع:
							<t>www.healthyandtasty.net</t>
						</div>
					</t>
					<t t-if="receipt.person_name">
						<div style="direction: rtl;"> مسئول التوصيل:
							<t t-esc="receipt.person_name"/>
						</div>
					</t>
					<t t-if="receipt.client">
						<div style="direction: rtl;">اسم العميل:
							<t t-esc="receipt.client.name"/>
						</div>
					</t>
					<t t-if="receipt.client">
						<div style="direction: rtl;">العنوان:
							<t t-esc="receipt.client.street"/>
						</div>
					</t>
					<t t-if="receipt.client">
						<div style="direction: rtl;">الهاتف:
							<t t-esc="receipt.client.phone"/>
						</div>
					</t>
				</div>
				<br/>
				<!-- Orderlines -->
				<div class="text-right" style="text-align: right;">
					<t t-call="OrderLinesReceipt"/>
				</div>
				<!-- Total -->
				<br/>
				<table class='receipt-total' style="direction:rtl">
					<colgroup>
						<col width='20%'/>
						<col width='40%'/>
						<col width='40%'/>
					</colgroup>
					<tr>
						<td class="text-center" style="text-align: right;"></td>
						<td class="text-center" style="text-align: right;">الاجمالي قبل الخصم:</td>
						<td class="text-center" style="text-align: right;">
							<t t-esc="env.pos.format_currency_no_symbol(receipt.subtotal+receipt.total_discount-receipt.delivery_amount)"/>&#160;ج.م




						</td>
					</tr>
					<tr t-if="receipt.person_name">
						<td class="text-center" style="text-align: right;"></td>
						<td class="text-center" style="text-align: right;">قيمة التوصيل:</td>
						<td class="text-center" style="text-align: right;" colspan="2">
							<t t-esc="env.pos.format_currency_no_symbol(receipt.delivery_amount)"/>&#160;ج.م




						</td>
					</tr>
					<tr>
						<td class="text-center" style="text-align: right;"></td>
						<td class="text-center" style="text-align: right;">الخصم:</td>
						<td class="text-center" style="text-align: right;">
							<t t-esc="env.pos.format_currency_no_symbol(receipt.total_discount)"/>&#160; ج.م




						</td>
					</tr>
					<tr>
						<td class="text-center" style="text-align: right;"></td>
						<td class="text-center" style="text-align: right;">الاجمالي:</td>
						<td class="text-center" style="text-align: right;" colspan="2">
							<t t-esc="env.pos.format_currency_no_symbol(receipt.total_with_tax)"/>&#160;ج.م


						</td>
					</tr>
				</table>
				<br/>
				<br/>
				<!-- Payment Lines -->
				<t t-foreach="receipt.paymentlines" t-as="line" t-key="line.cid">
					<div>
						<t t-esc="line.name"/>
						<span t-esc="env.pos.format_currency_no_symbol(line.amount)" class="pos-receipt-right-align"/>
					</div>
				</t>
				<br/>
				<div class="pos-receipt-amount receipt-change">
                الباقي

					<span t-esc="env.pos.format_currency(receipt.change)" class="pos-receipt-right-align"/>
				</div>
				<br/>
				<!-- Extra Payment Info -->
				<div class="before-footer"/>
				<!-- Footer -->
				<div t-if="receipt.footer_html" class="pos-receipt-center-align">
					<t t-raw="receipt.footer_html"/>
				</div>
				<div t-if="!receipt.footer_html and receipt.footer" class="pos-receipt-center-align"
                                         style="white-space:pre-line">
					<br/>
					<t t-esc="receipt.footer"/>
					<br/>
					<br/>
				</div>
				<div class="after-footer">
					<t t-foreach="receipt.paymentlines" t-as="line">
						<t t-if="line.ticket">
							<br/>
							<div class="pos-payment-terminal-receipt">
								<t t-raw="line.ticket"/>
							</div>
						</t>
					</t>
					<br/>
					<t t-set="vat" t-value="0"/>
					<t t-set="vat_total" t-value="0"/>
					<t t-set="not_vat_total" t-value="0"/>
					<table class='receipt-orderlines' dir="rtl">
						<colgroup>
							<col width='2%'/>
							<col width='14%'/>
							<col width='42%'/>
							<col width='42%'/>
							<!--                        <col width='1%'/>-->
						</colgroup>
						<tr style="border: 1px solid rgb(0, 0, 0);">
							<th class="text-center" style="text-align: center;">الكود</th>
							<th class="text-center" style="text-align: center;">النسبه</th>
							<th class="text-center" style="text-align: center;">القيمه</th>
							<th class="text-center" style="text-align: center;">قيمه الضريبه</th>
						</tr>
						<t t-foreach="receipt.orderlines" t-as="line">
							<t t-if="line.combo_prod_info">
								<t t-foreach="line.combo_prod_info" t-as="combo">
									<t t-if="combo.tax">
								<t t-set="vat" t-value="vat+(combo.price_w_o_tax*line.quantity)"/>
								<t t-set="vat_total" t-value="vat_total+(line.quantity*(combo.price * combo.qty))"/>
								</t>
							<t t-else="">
								<t t-set="not_vat_total" t-value="not_vat_total+(combo.price * combo.qty*line.quantity)"/></t>
							</t>
								</t>
							<t t-else="">
								<t t-if="line.tax">
									<t t-set="vat" t-value="vat+line.tax"/>
									<t t-set="vat_total" t-value="vat_total+(line.price_display_one * line.quantity)"/>
								</t>
								<t t-else="">
									<t t-set="not_vat_total" t-value="not_vat_total+(line.price_display_one * line.quantity)"/>

								</t>
							</t>

						</t>
						<tr>
							<td class="text-center" style="text-align: center;">
								<span>أ</span>
							</td>
							<td class="text-center" style="text-align: center;">
								<span>14.0%</span>
							</td>
							<td class="text-center" style="text-align: center;">
								<span t-esc="env.pos.format_currency_no_symbol(vat_total)"/>
							</td>
							<td class="text-center" style="text-align: center;">
								<span t-esc="env.pos.format_currency_no_symbol(vat,3)"/>
							</td>
						</tr>
						<tr>
							<td class="text-center" style="text-align: center;">
								<span>ب</span>
							</td>
							<td class="text-center" style="text-align: center;">
								<span>0.0%</span>
							</td>
							<td class="text-center" style="text-align: center;">
								<span t-esc="env.pos.format_currency_no_symbol(not_vat_total)"/>
							</td>
							<td class="text-center" style="text-align: center;">
								<span>0.0</span>
							</td>
						</tr>
					</table>
				</div>
				<br/>
				<div class="pos-receipt-order-data">
					<div>الخط الساخن 19132</div>
				</div>
			</div>
		</xpath>
	</t>
	<t t-name="OrderLinesReceipt" owl="1" t-inherit="point_of_sale.OrderLinesReceipt" t-inherit-mode="extension">
		<xpath expr="//t[@t-foreach='receipt.orderlines']" position="replace">
			<table class='receipt-orderlines' dir="rtl">
				<colgroup>
					<col width='45%'/>
					<col width='15%'/>
					<col width='15%'/>
					<col width='22%'/>
					<col width='3%'/>
				</colgroup>
				<tr style="border: 1px solid rgb(0, 0, 0);">
					<th class="text-right" style="text-align: right;">اسم الصنف</th>
					<th class="text-right" style="text-align: right;">الكمية</th>
					<th class="text-center" style="text-align: center;">السعر</th>
					<th class="text-left" style="text-align: left;">الإجمالي</th>
					<th class="text-left" style="text-align: left;"></th>
				</tr>
				<t t-foreach="receipt.orderlines" t-as="line" t-key="line.id"
                                t-if="!line.is_delivery_charge">
					<t t-if="line.combo_prod_info">
						<tr >
							<td colspan="5"  style="color:red;">
								<t t-esc="line.product_name" style="color:red;font-size:20pt"/>
							</td>

							</tr>
						<t t-foreach="line.combo_prod_info" t-as="combo">
							<t t-set="pprice" t-value="combo.price*(1-(combo.discount/100))"/>
							<tr>
								<td class="text-left" style="text-align: right;">
									<t t-esc="combo.product_name"/>
									<t t-if="combo.discount > 0">
										<div class="pos-disc-font">
                                    With a

											<t t-esc="combo.discount"/>% خصم


										</div>
												<div class="pos-disc-font">


										</div>
									</t>
								</td>
								<td class="text-right" style="text-align: right;">
									<t t-esc="line.quantity*combo.qty"/>
								</td>
								<td class="text-left" style="text-align: center;">
									<t t-esc="env.pos.format_currency_no_symbol(pprice)"/>
								</td>
								<td class="text-left" style="text-align: left;">
									<span class="price_display pos-receipt-left-align">
										<t t-esc="env.pos.format_currency_no_symbol(pprice * line.qty)"/>
									</span>
								</td>
								<td>
									<t t-if="combo.tax">
										<span>أ</span>
									</t>
									<t t-else="">
										<span>ب</span>
									</t>
								</td>
							</tr>
						</t>
					</t>
					<t t-else="">
                        <tr>
                            	<td class="text-left"
                                                                                    style="text-align: right;">
							<t t-esc="line.product_name"/>
							<t t-if="line.discount > 0">
								<div class="pos-disc-font">
                                    With a



									<t t-esc="line.discount"/>% خصم




								</div>
							</t>
						</td>
						<td class="text-right" style="text-align: right;">
							<t t-esc="line.quantity"/>
						</td>
						<td class="text-left" style="text-align: center;">
							<t t-esc="env.pos.format_currency_no_symbol(line.price_display_one)"/>
						</td>
						<td class="text-left" style="text-align: left;">
							<span class="price_display pos-receipt-left-align">
								<t t-esc="env.pos.format_currency_no_symbol(line.price_display_one * line.quantity)"/>
							</span>
						</td>
						<td>
							<t t-if="line.tax">
								<span>أ</span>
							</t>
							<t t-else="">
								<span>ب</span>
							</t>
						</td>
                        </tr>

					</t>
				</t>
			</table>
		</xpath>
	</t>
</templates>

